const e=Object.prototype.hasOwnProperty;function t(t,n){return Object.getOwnPropertyNames(n).forEach((function(i){if(!e.call(t,i)){var o=Object.getOwnPropertyDescriptor(n,i);Object.defineProperty(t,i,o)}})),t}const n={init(){this.plugins=[],this.settings={},this.mixins=[]},set(e,t){if(1===arguments.length)return this.settings[e];this.settings[e]=t},use(e,...t){return"function"==typeof e?this.plugins.push({handler:e,args:t}):"object"==typeof e&&this.mixins.push({handler:e,args:[]}),this},handle(e){this.plugins.forEach((t=>{if(t&&"function"==typeof t.handler){const n=t.handler.call(this,e,...t.args);"object"==typeof n&&this.mixins.push({handler:n,args:[]})}})),this.mixins.forEach((({handler:{onInit:t,onPause:n,build:i,onResume:o,onDestroy:s,onCreate:r,...g},args:h})=>{Object.assign(e,g)}))}};Buffer;let i=null;function o(){return h()&&r()}function s(){return h()&&g()}function r(){return"undefined"!=typeof hmApp}function g(){return"undefined"!=typeof __$$R$$__}function h(){return r()||g()}i="undefined"!=typeof __$$R$$__?__$$R$$__:()=>{},o()?hmApp.getPackageInfo:s()&&i("@zos/app").getPackageInfo,o()?hmUI:s()&&i("@zos/ui"),o()?hmSetting.getDeviceInfo:s()&&i("@zos/device").getDeviceInfo,o()?"undefined"!=typeof __$$app$$__&&__$$app$$__:s()&&i("@zos/i18n").getText,o()?hmApp.gotoPage:s()&&i("@zos/router").push,o()?hmBle:s()&&i("@zos/ble");let l=null;function a({state:e={},onInit:t,onResume:n,onPause:i,build:o,onDestroy:s,...r}={}){const g={state:e,...r,globalData:getApp()._options.globalData,onInit(...e){for(let t=0;t<=a.mixins.length-1;t++){const n=a.mixins[t];n.handler.onInit?.apply(this,e)}t?.apply(this,e)},onResume(...e){for(let t=0;t<=a.mixins.length-1;t++){const n=a.mixins[t];n.handler.onResume?.apply(this,e)}n?.apply(this,e)},onPause(...e){i?.apply(this,e);for(let t=a.mixins.length-1;t>=0;t--){const n=a.mixins[t];n.handler.onPause?.apply(this,e)}},build(...e){for(let t=0;t<=a.mixins.length-1;t++){const n=a.mixins[t];n.handler.build?.apply(this,e)}o?.apply(this,e)},onDestroy(...e){s?.apply(this,e);for(let t=a.mixins.length-1;t>=0;t--){const n=a.mixins[t];n.handler.onDestroy?.apply(this,e)}}};return a.handle(g),g}o()?l=DeviceRuntimeCore.HmLogger:s()?l=i("@zos/utils").log:"undefined"!=typeof messaging&&"undefined"!=typeof Logger&&(l=Logger),t(a,n),a.init(),a.use((function(){return{onInit(){this.logger=l.getLogger(this.name||"Page"),this.log=(...e)=>{this.logger.log(...e)},this.error=(...e)=>{e[0]instanceof Error?this.logger.error(...e):this.logger.error({},...e)},this.debug=(...e)=>{this.logger.debug(...e)}},onCreate(){this.logger=l.getLogger(this.name||"app.js"),this.log=(...e)=>{this.logger.log(...e)},this.error=(...e)=>{e[0]instanceof Error?this.logger.error(...e):this.logger.error({},...e)},this.debug=(...e)=>{this.logger.debug(...e)}}}}));export{a as BasePage,t as merge};
